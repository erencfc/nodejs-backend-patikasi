"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Mutation=void 0;var _nanoid=require("nanoid");function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var Mutation={// User
addUser:function addUser(_,_ref,_ref2){var data=_ref.data;var pubsub=_ref2.pubsub,db=_ref2.db;var user=_objectSpread({id:(0,_nanoid.nanoid)()},data);db.users.push(user);pubsub.publish("userCreated",{userCreated:user});return user},updateUser:function updateUser(_,_ref3,_ref4){var id=_ref3.id,data=_ref3.data;var pubsub=_ref4.pubsub,db=_ref4.db;var user_index=db.users.findIndex(function(user){return user.id==id});if(user_index==="-1")throw new Error("User not found!");var updated_user=db.users[user_index]=_objectSpread(_objectSpread({},db.users[user_index]),data);pubsub.publish("userUpdated",{userUpdated:updated_user});return updated_user},deleteUser:function deleteUser(_,_ref5,_ref6){var id=_ref5.id;var pubsub=_ref6.pubsub,db=_ref6.db;var user_index=db.users.findIndex(function(user){return user.id==id});if(user_index===-1)throw new Error("User not found!");var deleted_user=db.users[user_index];db.users.splice(user_index,1);pubsub.publish("userDeleted",{userDeleted:deleted_user});return deleted_user},deleteAllUsers:function deleteAllUsers(_,__,_ref7){var db=_ref7.db;var length=db.users.length;db.users.splice(0,length);return{count:length}},// Event
addEvent:function addEvent(_,_ref8,_ref9){var data=_ref8.data;var pubsub=_ref9.pubsub,db=_ref9.db;var event=_objectSpread({id:(0,_nanoid.nanoid)()},data);db.events.push(event);pubsub.publish("eventCreated",{eventCreated:event});return event},updateEvent:function updateEvent(_,_ref10,_ref11){var id=_ref10.id,data=_ref10.data;var pubsub=_ref11.pubsub,db=_ref11.db;var event_index=db.events.findIndex(function(event){return event.id==id});if(event_index==="-1")throw new Error("Event not found!");var updated_event=db.events[event_index]=_objectSpread(_objectSpread({},db.events[event_index]),data);pubsub.publish("eventUpdated",{eventUpdated:updated_event});return updated_event},deleteEvent:function deleteEvent(_,_ref12,_ref13){var id=_ref12.id;var pubsub=_ref13.pubsub,db=_ref13.db;var event_index=db.events.findIndex(function(event){return event.id==id});if(event_index===-1)throw new Error("Event not found!");var deleted_event=db.events[event_index];db.events.splice(event_index,1);pubsub.publish("eventDeleted",{eventDeleted:deleted_event});return deleted_event},deleteAllEvents:function deleteAllEvents(_,__,_ref14){var pubsub=_ref14.pubsub,db=_ref14.db;var length=db.events.length;db.events.splice(0,length);return{count:length}},// Location
addLocation:function addLocation(_,_ref15,_ref16){var data=_ref15.data;var db=_ref16.db;var location=_objectSpread({id:(0,_nanoid.nanoid)()},data);db.locations.push(location);return location},updateLocation:function updateLocation(_,_ref17,_ref18){var id=_ref17.id,data=_ref17.data;var db=_ref18.db;var location_index=db.locations.findIndex(function(location){return location.id==id});if(location_index==="-1")throw new Error("Location not found!");var updated_location=db.locations[location_index]=_objectSpread(_objectSpread({},db.locations[location_index]),data);return updated_location},deleteLocation:function deleteLocation(_,_ref19,_ref20){var id=_ref19.id;var db=_ref20.db;var location_index=db.locations.findIndex(function(location){return location.id==id});if(location_index===-1)throw new Error("Location not found!");var deleted_location=db.locations[location_index];db.locations.splice(location_index,1);return deleted_location},deleteAllLocations:function deleteAllLocations(_,__,_ref21){var db=_ref21.db;var length=db.locations.length;db.locations.splice(0,length);return{count:length}},// Participant
addParticipant:function addParticipant(_,_ref22,_ref23){var data=_ref22.data;var pubsub=_ref23.pubsub,db=_ref23.db;var participant=_objectSpread({id:(0,_nanoid.nanoid)()},data);db.participants.push(participant);pubsub.publish("participantAdded",{participantAdded:participant});return participant},updateParticipant:function updateParticipant(_,_ref24,_ref25){var id=_ref24.id,data=_ref24.data;var pubsub=_ref25.pubsub,db=_ref25.db;var participant_index=db.participants.findIndex(function(participant){return participant.id==id});if(participant_index==="-1")throw new Error("Participant not found!");var updated_participant=db.participants[participant_index]=_objectSpread(_objectSpread({},db.participants[participant_index]),data);pubsub.publish("participantUpdated",{participantUpdated:updated_participant});return updated_participant},deleteParticipant:function deleteParticipant(_,_ref26,_ref27){var id=_ref26.id;var pubsub=_ref27.pubsub,db=_ref27.db;var participant_index=db.participants.findIndex(function(participant){return participant.id==id});if(participant_index===-1)throw new Error("Participant not found!");var deleted_participant=db.participants[participant_index];db.participants.splice(participant_index,1);pubsub.publish("participantDeleted",{participantDeleted:deleted_participant});return deleted_participant},deleteAllParticipants:function deleteAllParticipants(_,__,_ref28){var db=_ref28.db;var length=db.participants.length;db.participants.splice(0,length);return{count:length}}};exports.Mutation=Mutation;